function getEnv(){var e="https:"===window.location.protocol,r=window.location.href.match(/__prerelease=1/i),a=window.location.href.match(/__branch=([a-z0-9\-]*)/i),t=a&&a.length>0?a[1]:"";return{branch:t,isHttps:e,prerelease:r}}function getMode(e){var r="http-live";return""!==e.branch&&e.isHttps?r="https-alpha":""!==e.branch?r="http-alpha":e.prerelease?r="http-prerelease":e.isHttps&&(r="https-live"),r}function getConnectUrl(e){var r=getEnv(),a={"http-live":"http://connect.mail.ru/","https-live":"https://connect.mail.ru/","https-alpha":"https://"+r.branch+".connect.myalpha15.i.mail.ru/","http-alpha":"http://"+r.branch+".connect.myalpha15.i.mail.ru/","http-prerelease":"http://connect.myalpha6.i.mail.ru/"},t=a[getMode(r)]+e+"?";return""!==r.branch?t+="__branch="+r.branch+"&":r.prerelease&&(t+="__prerelease=1&"),t}var DEBUG=DEBUG||!1,mailru={DEF:{COOKIE:"mrc_share",DOMAIN:document.location.host},DOM:{ready:!1}};jQuery.extend(mailru,{init:function(e){e=e||{},mailru.DEF.cls=e.cls,mailru.share.init(e),mailru.share.form=e.form||null,mailru.intercom.init()},intercomType:window.postMessage?"event":"hash",intercom:{inited:!1,init:function(){if(!mailru.intercom.inited){if(!mailru.intercom[mailru.intercomType])return!1;mailru.intercom.wrp=mailru.intercom[mailru.intercomType],mailru.intercom.wrp.init()}},receiver:function(){},wrp:{init:function(){},request:function(){}},mothership:{_m:null,init:function(){for(var e=0;e<parent.frames.length;e++)try{parent.frames[e]!==window&&"undefined"!=typeof parent.frames[e].mailru&&"undefined"!=typeof parent.frames[e].mailru.share&&parent.frames[e].mailru.GET.button_id==mailru.GET.button_id&&(mailru.intercom.mothership._m=parent.frames[e])}catch(e){}},request:function(){}},hash:{init:function(){},request:function(e){window.parent.postMessage(e,mailru.GET.host)}},event:{init:function(){},request:function(e){window.parent.postMessage(e,mailru.GET.host)}}},utils:{parseGet:function(e){e=e.split("?")[1]||e;for(var r,a=e.split("&"),t={},i=a.length;i--;)r=a[i].indexOf("="),t[a[i].substr(0,r)]=decodeURIComponent(a[i].substr(r+1));return t},makeGet:function(e){var r=[];for(var a in e)e.hasOwnProperty(a)&&(r[r.length]=a+"="+encodeURIComponent(e[a]));return r.join("&")},setCookie:function(e){return!(!e||!e.name)&&(e.domain=e.domain||mailru.DEF.DOMAIN,e.path=e.path||"/",void(document.cookie=e.name+"="+escape(e.value)+(e.expires?"; expires="+new Date(e.expires).toUTCString():"")+(e.path?"; path="+e.path:"")+(e.domain?"; domain=."+e.domain:"")+(e.secure?"; secure":"")))},getCookie:function(e){var r;if(r=document.cookie.match(new RegExp("(^|;\\s*)"+e+"=([^;]+)(;|$)")))return unescape(r[2])},plu:function(e,r,a,t){return e<=20&&e>=10||0==e?t:(e=e.toString(),e=e[e.length-1],1==e?r:e<=4&&e>1?a:e>=5||0==e?t:void 0)},uniqid:function(){return Math.round(1e7*Math.random(+new Date+Math.random()))},resize:function(e){var r={};r.wid=mailru.GET.wid,e.width&&(r.modalWindowWidth=e.width),e.height&&(r.modalWindowHeight=e.height),mailru.intercom.wrp.request(mailru.utils.makeGet({event:"common.modalWindow",result:mailru.utils.makeGet(r),relation:"parent",rt:1}))},resizeImage:function(avatar,MAX_WIDTH,MAX_HEIGHT){with(MAX_WIDTH=MAX_WIDTH||45,MAX_HEIGHT=MAX_HEIGHT||45,avatar)width>MAX_WIDTH&&(height/=width/MAX_WIDTH,width=MAX_WIDTH),height>MAX_HEIGHT&&(width/=height/MAX_HEIGHT,height=MAX_HEIGHT),style.display="inline"},serialize:function(e){if("undefined"==typeof $)return"";for(var r=$(e).find(":input"),a="",t=0;t<r.length;t++)t&&(a+="&"),a+=r[t].name+"="+encodeURIComponent($(r[t]).val());return a},queue:{_items:[],push:function(e){mailru.utils.queue._items.push(e)},pop:function(){return!!mailru.utils.queue._items.length&&mailru.utils.queue._items.pop()}},undef:function(e){return"undefined"==typeof e},notifyButtons:function(e){e=e||{};for(var r=null,a=0;a<parent.frames.length;a++)try{if(r=parent.frames[a],mailru.utils.undef(r.mailru)||mailru.utils.undef(r.mailru.share))continue;r=parent.frames[a].mailru,r.GET.wid==mailru.GET.wid?e.self&&e.self(parent.frames[a]):e.not_self&&e.not_self(parent.frames[a]),r.GET.wid==mailru.GET.buttonID?e.parent&&e.parent(parent.frames[a]):e.not_parent&&e.not_parent(parent.frames[a]),r.GET.url&&mailru.GET.url&&r.GET.url.toLowerCase()==mailru.GET.url.toLowerCase()&&r.GET.wid!=mailru.GET.wid&&e.same_url&&e.same_url(parent.frames[a]),e.different&&e.different(parent.frames[a]),e.all&&e.all(parent.frames[a])}catch(e){}e.after&&e.after()},addCounter:function(e,r){var a=$.Deferred();r=r||!1,e=e||!1;var t=!1,i=!1;return r&&(i=new Image),e&&(t=new Image),r&&(i.src="//my.mail.ru/grstat?name="+r+"&connect=1"),e&&(t.src="//rs.mail.ru/d"+e+".gif?"+Math.random()),t.complete||i.complete?a.resolve():(r&&(i.onload=a.resolve),e&&(t.onload=a.resolve)),e||r||a.resolve(),a.promise()}},login:{check:function(e){return!!mailru.share[e.type].user},show:function(){}},share:{current:null,retryAuth:function(e){"string"==typeof e&&(e=jQuery.parseJSON(e)),e=e[2]||"";var r=getConnectUrl("share")+"jsonp=1",a=$("<script></script>").attr("src",e+encodeURIComponent(r));$(document.body).append(a)},login:{check:function(e){return mailru.share[e.type].user},show:function(e){switch(e.type){case"mm":window.open(getConnectUrl("login")+"noclear=1&PopupMode=1&connect=1&sharelike=1","_blank","width=540,height=360"),mailru.utils.addCounter(525466,"login_my");break;case"ok":window.open("http://www.odnoklassniki.ru/oauth/authorize?client_id=3812608&scope=&response_type=code&redirect_uri=https://connect.mail.ru/xdm.html"),mailru.utils.addCounter(525467,"login_ok")}},process:function(){mailru.utils.notifyButtons({self:function(e){mailru.utils.setCookie({name:mailru.DEF.COOKIE,value:mailru.utils.makeGet({auto_share:1})}),document.location.reload()},not_self:function(e){e.mailru.share.changeState({type:"mm",reload:!0})}})}},sendToMothership:function(e,r){var a=mailru.utils.serialize(mailru.share.form[0]),t=mailru.utils.parseGet(a);t.comment=r.text||"","ok"==r.type&&(t.ok_uid=mailru.share.ok.uid,t.ok_sig=mailru.share.ok.sig,1==r.checkCrosspost&&(t.checkCrosspost=1),delete t.unlike,a=mailru.utils.makeGet(t)),"mm"==r.type&&(mailru.share.mm.shared?(t.unlike=1,a=mailru.utils.makeGet(t)):(delete t.unlike,a=mailru.utils.makeGet(t))),mailru.share.form&&$.ajax({url:mailru.share.form[0].action,type:"POST",dataType:"json",data:a,complete:function(e){e.responseText.indexOf("Auth")>-1?(mailru.share._blockComment=!1,mailru.share.retryAuth(e.responseText)):mailru.share.preloader.hide(r)},success:e,error:function(){mailru.share[r.type].processing=!1,mailru.share._blockComment=!1},abort:function(){mailru.share.retryAuth(),mailru.share[r.type].processing=!1,mailru.share._blockComment=!1}})},add:function(e,r){if(mailru.share[e.type].shared=!0,mailru.share[e.type].count++,e.update)return!1;var a={};"mm"==e.type&&(a={wid:mailru.GET.wid,history_id:r.history_id,id:mailru.GET.wid,type:e.type},mailru.utils.addCounter(642289)),"ok"==e.type&&(a={wid:mailru.GET.wid,OK_uid:mailru.share.ok.uid,id:mailru.GET.wid,type:e.type,noComment:!0},mailru.utils.addCounter(642290)),"done"==mailru.share.crosspost&&(a.crosspost=1,mailru.share.crosspost=mailru.share.checkCrosspost(e)),mailru.share.checkCrosspost(e)&&(a.checkCrosspost=1),mailru.share.comment||(a.noComment=1),mailru.intercom.wrp.request(mailru.utils.makeGet({event:"plugin.liked",result:mailru.utils.makeGet(a),relation:"parent",rt:1}))},remove:function(e){if(mailru.share[e.type].shared=!1,mailru.share[e.type].count--,mailru.share[e.type].count<0&&(mailru.share[e.type].count=0),mailru.share._blockComment=!1,e.update)return!1;var r={};return"mm"==e.type&&(r={id:mailru.GET.buttonid,wid:mailru.GET.wid,type:e.type}),"ok"!=e.type&&void mailru.intercom.wrp.request(mailru.utils.makeGet({event:"plugin.unliked",result:mailru.utils.makeGet(r),relation:"parent",rt:1}))},process:function(e){if(mailru.share[e.type].processing||mailru.share._blockComment)return!1;if(mailru.share._blockComment=!0,mailru.share.mm.noMy&&"mm"==e.type)return mailru.intercom.wrp.request(mailru.utils.makeGet({event:"plugin.errorMessage",result:mailru.utils.makeGet({errorType:"without_my_error",id:mailru.GET.buttonid,wid:mailru.GET.wid}),relation:"parent",rt:1})),!1;if(mailru.share[e.type].processing=!0,mailru.share.login.check(e))switch(mailru.share._blockComment=!0,e.type){case"mm":mailru.share.preloader.show(e),mailru.share[e.type].shared?mailru.share.sendToMothership(function(r){if(r.unlike_ok?(mailru.share.remove(e),e.update=!0,mailru.share.changeState(e)):mailru.share[e.type].processing=!1,r.error)switch(mailru.share[e.type].processing=!1,r.error){case"limit error":mailru.share.error(e,r);break;case"cannot delete":mailru.share._blockComment=!1}},e):mailru.share.sendToMothership(function(r){if(r.history_id&&"spam"!==r.history_id?(mailru.share.add(e,r),e.update=!0,mailru.share.changeState(e),mailru.share.comment?mailru.share.comment(e,r):mailru.share._blockComment=!1):mailru.share[e.type].processing=!1,r.error)switch(mailru.share[e.type].processing=!1,r.error){case"limit error":mailru.share.error(e,r);break;case"need_login":mailru.share.login.show(e)}},e);break;case"ok":mailru.share[e.type].shared?mailru.share._blockComment=!1:(mailru.share.preloader.show(e),mailru.share.comment&&mailru.share.comment(e))}else mailru.share[e.type].processing=!1,mailru.share._blockComment=!1,mailru.share.login.show(e)},preloader:{_set:function(e){mailru.share.preloader[e.type]||(mailru.share.preloader[e.type]={_p:$("#"+e.type+"-like-preloader"),_l:$("#"+e.type+"-like-logo")})},show:function(e){mailru.share.preloader._set(e),$(mailru.share.preloader[e.type]._p).show(),$(mailru.share.preloader[e.type]._l).hide()},hide:function(e){mailru.share.preloader._set(e),$(mailru.share.preloader[e.type]._p).hide(),$(mailru.share.preloader[e.type]._l).show()}},error:function(e,r){mailru.intercom.wrp.request(mailru.utils.makeGet({event:"plugin.like.rl",result:mailru.utils.makeGet({wid:mailru.GET.wid,id:mailru.GET.buttonid,type:e.type}),relation:"parent",rt:1}))},_blockComment:!1,comment:function(e,r){var a={};switch(e.type){case"mm":a={wid:mailru.GET.wid,id:mailru.GET.buttonid,type:e.type,offset:mailru.share.mm.button[0].offsetLeft};break;case"ok":a={wid:mailru.GET.wid,id:mailru.GET.buttonid,OK_uid:mailru.share.ok.uid,type:e.type,offset:mailru.share.ok.button[0].offsetLeft,avatar:mailru.share.ok.avatar}}mailru.share.checkCrosspost(e)&&(mailru.share.crosspost="ready",a.checkCrosspost=1),mailru.intercom.wrp.request(mailru.utils.makeGet({event:"plugin.like.comment",result:mailru.utils.makeGet(a),relation:"parent",rt:1}))},updateCounter:function(e){return!mailru.share.noCounter&&void(mailru.share[e.type].count>0?$(mailru.share[e.type].counter).find("span").text((mailru.share[e.type].count+"").replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")):$(mailru.share[e.type].counter).find("span").text("+1"))},changeState:function(e){return e.reload?(mailru.share[e.type].processing?setTimeout(document.location.reload,5e3):document.location.reload(),!0):(mailru.share.updateCounter(e),mailru.share[e.type].shared?$(mailru.share[e.type].button).addClass(mailru.DEF.cls.liked).addClass(mailru.DEF.cls.liked+"-"+e.type).addClass(e.type+"-"+mailru.DEF.cls.liked):$(mailru.share[e.type].button).removeClass(mailru.DEF.cls.liked).removeClass(mailru.DEF.cls.liked+"-"+e.type).removeClass(e.type+"-"+mailru.DEF.cls.liked),mailru.share[e.type].processing=!1,mailru.share.preloader.hide(e),void(e.update&&mailru.utils.notifyButtons({same_url:function(e,r){return function(a){r.update=!0,e?a.mailru.share.add(r):a.mailru.share.remove(r),r.update=!1,a.mailru.share.changeState(r)}}(mailru.share[e.type].shared,e)})))},notify:function(e){mailru.share.crosspost&&"ready"==mailru.share.crosspost&&(mailru.share.crosspost="processing",mailru.share.doCrosspost(e))},checkCrosspost:function(e){return e=e||{},!(!mailru.share.login.check({type:"ok"})||!mailru.share.login.check({type:"mm"})||(mailru.share.mm.shared||"ok"!=e.type)&&(mailru.share.ok.shared||"mm"!=e.type)||!mailru.GET.cp&&!mailru.GET.crosspost)},doCrosspost:function(e){"ok"==e.type?e.type="mm":(e.type="ok",e.checkCrosspost=1),mailru.share.sendToMothership(function(r){r.error||r.rl||(mailru.share.crosspost="done",mailru.share.add(e,r),e.update=!0,mailru.share.changeState(e))},e)},init:function(e){e=e||{},mailru.share.mm.button=$("#mm-like"),mailru.share.mm.counter=$("#mm-share-counter"),mailru.share.ok.button=$("#ok-like"),mailru.share.ok.counter=$("#ok-share-counter"),mailru.intercom.init(),e.noComment&&(mailru.share.comment=!1),mailru.share.crosspost=mailru.share.checkCrosspost(),e.noCounter&&(mailru.share.noCounter=!0,mailru.share.mm.counter.hide(),mailru.share.ok.counter.hide()),e.noMy?(mailru.share.mm.noMy=!0,$(mailru.share.mm.button).click(function(){return mailru.intercom.wrp.request(mailru.utils.makeGet({event:"plugin.errorMessage",result:mailru.utils.makeGet({wid:mailru.GET.wid,errorType:"without_my_error",id:mailru.GET.buttonid}),relation:"parent",rt:1})),!1})):$(mailru.share.mm.button).click(function(){return mailru.share.current="mm",mailru.share.process({type:"mm"}),!1}),$(mailru.share.ok.button).click(function(){return mailru.share.current="ok",mailru.share.process({type:"ok"}),!1})},mm:{init:function(e){var r=mailru.utils.getCookie(mailru.DEF.COOKIE)||"";mailru.share.mm.user=e.user,mailru.share.mm.shared=e.shared,mailru.share.mm.count=e.count,mailru.share.mm.inited=!0,mailru.share.updateCounter({type:"mm"}),mailru.share.mm.user&&1==mailru.utils.parseGet(r).auto_share&&(mailru.utils.setCookie({name:mailru.DEF.COOKIE,value:""}),mailru.share.mm.shared?mailru.intercom.wrp.request(mailru.utils.makeGet({event:"plugin.liked",result:mailru.utils.makeGet({wid:mailru.GET.wid,id:mailru.GET.wid,type:"mm"}),relation:"parent",rt:1})):mailru.share.process({type:"mm"}))},add:function(){},remove:function(){},inited:!1,user:null,shared:null,button:null,counter:null,count:0,processing:!1,preloader:{_p:null,show:function(){},hide:function(){}}},ok:{init:function(e){return"undefined"!=typeof e&&(mailru.share.ok.count=+e.count||0,e.uid&&(mailru.share.ok.uid=e.uid),"ok"==e.status||"shared"==e.status?(mailru.share.ok.user=!0,mailru.utils.addCounter(525464,"shows_ok_cookie"),mailru.share.mm.user&&mailru.utils.addCounter(525465,"shows_both_cookies")):(mailru.share.ok.user=!1,mailru.share.mm.user?mailru.utils.addCounter(525463,"shows_my_cookie"):mailru.utils.addCounter(525462,"shows_wo_cookies")),mailru.share.crosspost=mailru.share.checkCrosspost(),e.sign&&(mailru.share.ok.sig=e.sign),e.avatarURL&&(mailru.share.ok.avatar=e.avatarURL.replace("&amp;","&")),"shared"==e.status&&(mailru.share.ok.shared=!0,mailru.share.changeState({type:"ok"})),mailru.share.updateCounter({type:"ok"}),void(mailru.share.ok.inited=!0))},add:function(e){mailru.share.sendToMothership(function(r){mailru.share.add(e,r),e.update=!0,mailru.share.changeState(e)},e)},remove:function(){},inited:!1,user:null,uid:null,sig:null,avatar:null,shared:null,button:null,counter:null,count:0,processing:!1,preloader:{_p:null,show:function(){},hide:function(){}},login:{after:function(e){mailru.share.ok.init(e),mailru.share.process({type:"ok"}),mailru.utils.notifyButtons({not_self:function(e){e.mailru.share.changeState({type:"ok",reload:!0})}})}},getInfo:function(){$(document.body).append($('<script src="http://www.odnoklassniki.ru/dk?st.cmd=shareData&ref='+encodeURIComponent(mailru.utils.parseGet(document.URL).url)+'&cb=mailru.share.ok.login.after"></script>'))}}},avatar:{resize:function(avatar){var MAX_WIDTH=45,MAX_HEIGHT=45;with(avatar)width>MAX_WIDTH&&(height/=width/MAX_WIDTH,width=MAX_WIDTH),height>MAX_HEIGHT&&(width/=height/MAX_HEIGHT,height=MAX_HEIGHT),style.display="inline"}}}),mailru.GET=mailru.utils.parseGet(document.URL),mailru.GET.buttonid=mailru.GET.buttonID,(mailru.GET.history_id||mailru.GET.ok_uid)&&(mailru.share={_type:null,counters:{noCP:!1},close:function(e){e=e||{};var r=!1;if($(mailru.share.comment._c).hasClass("focused")&&!e.force)return!1;if(mailru.GET.checkCrosspost)if($("#crosspost").attr("checked")||mailru.share.counters.noCP)switch(mailru.share._type){case"mm":r=642292;break;case"ok":r=642293}else switch(mailru.utils.addCounter("632319"),mailru.share.counters.noCP=1,mailru.share._type){case"mm":r=642294;break;case"ok":r=642296}"ok"!=mailru.share._type||mailru.share.comment._processed||mailru.share.comment.process("close"),mailru.share.comment._processed||mailru.share.notify({text:"",type:mailru.share._type,noClose:!0,noShare:!0}),mailru.utils.notifyButtons({self:function(){mailru.share._blockComment=!1}}),mailru.utils.addCounter(r).done(function(){mailru.intercom.wrp.request(mailru.utils.makeGet({event:"plugin.closeComment",result:mailru.utils.makeGet({wid:mailru.GET.wid}),relation:"parent",rt:1}))})},comment:{_c:null,_p:null,_timeout:1e4,_processed:!1,_checkLength:function(){var e=mailru.share.warn.length-$(mailru.share.comment._c).val().length;e<0&&($(mailru.share.comment._c).val($(mailru.share.comment._c).val().substr(0,mailru.share.warn.length)),e=0),$("#counter").text(e),$("#counter").show(),e<=15?$("#counter").addClass("warn"):$("#counter").removeClass("warn")},init:function(){mailru.share.comment._c=$("#comment"),mailru.share.comment._p=$(mailru.share.comment._c).text(),$(mailru.share.comment._c).focus(function(){$("#counter").show(),$(this).val()==mailru.share.comment._p&&($(this).val(""),$(this).addClass("focused")),clearTimeout(mailru.share._t),mailru.share._t=null}),$(mailru.share.comment._c).blur(function(){$(this).val()!=mailru.share.comment._p&&""!=$(this).val()||($(this).val(mailru.share.comment._p),$(this).removeClass("focused"),$("#counter").hide()),mailru.share._t||(mailru.share._t=setTimeout(mailru.share.close,mailru.share.comment._timeout))}),$(mailru.share.comment._c).keyup(mailru.share.comment._checkLength),mailru.share._t=setTimeout(mailru.share.close,mailru.share.comment._timeout),$("#close").click(function(){return mailru.share.close({force:!0}),!1}),$("#add-comment").click(function(){return clearTimeout(mailru.share._t),mailru.share.comment.process(),!1})},process:function(e){e=e||!1;var r=!1;return""!==$(mailru.share.comment._c).val()&&$(mailru.share.comment._c).val()!==mailru.share.comment._p&&(r=$(mailru.share.comment._c).val()),mailru.share.warn&&mailru.share.warn.length<$(mailru.share.comment._c).val().length&&!e?(mailru.share.comment.error.show("legnth"),!1):(r&&"mm"==mailru.share._type&&mailru.share.sendToMothership(function(){mailru.share.notify({text:r,type:mailru.share._type,noClose:!0}),mailru.share.comment.post()}),void("ok"==mailru.share._type&&mailru.share.notify({text:r||"",type:mailru.share._type})))},post:function(){mailru.share.comment._processed=!0,mailru.share.close({force:!0})},error:{_e:null,show:function(e){mailru.share.comment.error._e=mailru.share.comment.error._e||$("#error"),e=e||"";var r="";switch(e){case"length":r="Слишком длинный комментарий"}mailru.share.comment.error._e.text(r),mailru.share.comment.error._e.show()},hide:function(){mailru.share.comment.error._e.hide()}}},captcha:function(){},init:function(e){if(e=e||{},e.warn&&(mailru.share.warn=e.warn),mailru.GET.ok_uid&&(mailru.share._type="ok"),mailru.GET.history_id&&(mailru.share._type="mm"),!mailru.share._type)throw new Error("Can't get comment type");mailru.share.comment.init(),$(mailru.share.form).submit(mailru.share.comment.process)},sendToMothership:function(e,r){e=e||function(){};var a=mailru.utils.serialize(mailru.share.form[0]);mailru.share.form&&$.ajax({url:mailru.share.form[0].action,type:"POST",data:a,success:e,error:function(){mailru.share[r.type].processing=!1,mailru.share._blockComment=!1},abort:function(){mailru.share[r.type].processing=!1,mailru.share._blockComment=!1}})},notify:function(e){e=e||{};mailru.utils.notifyButtons({parent:function(e,r){return function(a){a.mailru.share._blockComment=!1,e.GET.checkCrosspost&&$("#crosspost").attr("checked")&&a.mailru.share.notify({type:e.share._type,text:r.text}),r.noShare||a.mailru.share[mailru.share._type].shared||"ok"==e.share._type&&a.mailru.share.ok.add({type:"ok",text:r.text})}}(mailru,e)}),mailru.share.comment._processed=!0,e.noClose||mailru.share.close({force:!0})}}),mailru.GET.rl&&(mailru.share={init:function(e){return!!e.form&&(mailru.share.captcha._c=$("#captcha_answer"),$(e.form).submit(function(){return mailru.share.captcha.process(),!1}),void $("#process-captcha").click(function(){return $(e.form).submit(),!1}))},error:function(e){var r=mailru.utils.parseGet(location.search);switch(e){case"wrong":r.error="wrong";break;case"empty":r.error="empty"}location.search=mailru.utils.makeGet(r),mailru.utils.resize({width:document.body.offsetWidth,height:document.body.offsetHeight+15})},captcha:{_c:null,process:function(e){return""==$(mailru.share.captcha._c).val()?(mailru.share.error("empty"),!1):(e=e||{},e.history_id?(mailru.share.captcha.notify(e),!0):"limit error"==e.error?(mailru.share.error("wrong"),!1):void mailru.share.sendToMothership(mailru.share.captcha.process))},notify:function(e){e=e||!1;mailru.utils.notifyButtons({parent:function(e){return function(r){r.mailru.share._blockComment=!1,!r.mailru.share.mm.shared&&e?(r.mailru.share.add({type:"mm"},e),r.mailru.share.changeState({type:"mm",update:!0}),r.mailru.share.comment&&r.mailru.share.comment({type:"mm"},e)):r.mailru.share.changeState({reload:!0,type:"mm"})}}(e)})}},sendToMothership:function(e,r){e=e||function(){};var a=mailru.utils.serialize(mailru.share.form[0]);mailru.share.form&&$.ajax({url:mailru.share.form[0].action,type:"POST",dataType:"json",data:a,success:e})}});